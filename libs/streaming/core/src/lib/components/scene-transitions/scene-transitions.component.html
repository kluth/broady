<mat-card class="scene-transitions">
  <mat-card-header class="transitions-header">
    <mat-card-title>
      <mat-icon>transition</mat-icon>
      Scene Transitions
    </mat-card-title>
  </mat-card-header>

  <mat-divider></mat-divider>

  <mat-card-content class="transitions-content">
    <!-- Current Transition -->
    <div class="current-transition">
      <div class="transition-preview">
        <span class="transition-icon">{{ transitionInfo().icon }}</span>
        <div class="transition-details">
          <h4>{{ getTransitionName(currentTransition().type) }}</h4>
          <p>{{ transitionInfo().description }}</p>
          <div class="duration-display">
            <span class="duration-label">Duration:</span>
            <span class="duration-value">{{ currentTransition().duration }}ms</span>
          </div>
        </div>
      </div>

      <button mat-raised-button color="primary" (click)="previewTransition()">
        <mat-icon>preview</mat-icon>
        Preview Transition
      </button>
    </div>

    <!-- Transition Type Selector -->
    <div class="control-section">
      <h4>Transition Type</h4>
      <div class="transition-grid">
        @for (type of transitionTypes; track type) {
          <button
            mat-stroked-button
            class="transition-btn"
            [color]="currentTransition().type === type ? 'primary' : ''"
            (click)="updateTransitionType(type)"
            [matTooltip]="getTransitionInfo(type).description"
          >
            <span class="transition-icon-small">{{ getTransitionInfo(type).icon }}</span>
            <span class="transition-name">{{ getTransitionName(type) }}</span>
          </button>
        }
      </div>
    </div>

    <!-- Duration Control -->
    <div class="control-section">
      <h4>Duration</h4>
      <div class="duration-control">
        <mat-slider min="0" max="2000" step="50" class="duration-slider" showTickMarks discrete>
          <input
            matSliderThumb
            [value]="currentTransition().duration"
            (valueChange)="updateDuration($event)"
          />
        </mat-slider>
        <mat-form-field appearance="outline" class="duration-input">
          <mat-label>Duration</mat-label>
          <input
            matInput
            type="number"
            min="0"
            max="5000"
            step="50"
            [value]="currentTransition().duration"
            (input)="updateDuration(+$any($event.target).value)"
          />
          <span matSuffix>ms</span>
        </mat-form-field>
      </div>
    </div>

    <!-- Transition Settings -->
    @if (transitionInfo().settings.length > 0) {
      <div class="control-section">
        <h4>Settings</h4>
        <div class="settings-list">
          @for (setting of transitionInfo().settings; track setting.key) {
            <div class="setting-row">
              <label>{{ setting.label }}</label>

              @if (setting.type === 'select') {
                <select
                  [value]="currentTransition().settings[setting.key]"
                  (change)="updateSetting(setting.key, $any($event.target).value)"
                >
                  @for (option of setting.options; track option) {
                    <option [value]="option">{{ option }}</option>
                  }
                </select>
              }

              @if (setting.type === 'number') {
                <input
                  type="number"
                  [value]="currentTransition().settings[setting.key]"
                  (input)="updateSetting(setting.key, +$any($event.target).value)"
                />
              }

              @if (setting.type === 'color') {
                <input
                  type="color"
                  [value]="currentTransition().settings[setting.key]"
                  (input)="updateSetting(setting.key, $any($event.target).value)"
                />
              }

              @if (setting.type === 'checkbox') {
                <input
                  type="checkbox"
                  [checked]="currentTransition().settings[setting.key]"
                  (change)="updateSetting(setting.key, $any($event.target).checked)"
                />
              }

              @if (setting.type === 'file') {
                <input
                  type="text"
                  [value]="currentTransition().settings[setting.key]"
                  (input)="updateSetting(setting.key, $any($event.target).value)"
                  placeholder="Select file..."
                />
              }
            </div>
          }
        </div>
      </div>
    }

    <!-- Presets -->
    <div class="control-section">
      <h4>Presets</h4>
      <div class="presets-grid">
        @for (preset of presets; track preset.name) {
          <button
            mat-stroked-button
            class="preset-btn"
            (click)="applyPreset(preset)"
            [matTooltip]="preset.name"
          >
            {{ preset.name }}
          </button>
        }
      </div>
    </div>
  </mat-card-content>
</mat-card>
